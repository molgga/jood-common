<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>array/utils.ts - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow-eighties.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/style.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BrowserScroll.html">BrowserScroll</a><ul class='methods'><li data-type='method'><a href="BrowserScroll.html#destroy">destroy</a></li><li data-type='method'><a href="BrowserScroll.html#dispatchDirectionLooseY">dispatchDirectionLooseY</a></li><li data-type='method'><a href="BrowserScroll.html#dispatchDirectionY">dispatchDirectionY</a></li><li data-type='method'><a href="BrowserScroll.html#dispatchEndY">dispatchEndY</a></li><li data-type='method'><a href="BrowserScroll.html#dispatchHalfEndY">dispatchHalfEndY</a></li><li data-type='method'><a href="BrowserScroll.html#dispatchScroll">dispatchScroll</a></li><li data-type='method'><a href="BrowserScroll.html#getState">getState</a></li><li data-type='method'><a href="BrowserScroll.html#holdDispatchEndY">holdDispatchEndY</a></li><li data-type='method'><a href="BrowserScroll.html#holdDispatchHalfEndY">holdDispatchHalfEndY</a></li><li data-type='method'><a href="BrowserScroll.html#init">init</a></li><li data-type='method'><a href="BrowserScroll.html#observeDirectionLooseY">observeDirectionLooseY</a></li><li data-type='method'><a href="BrowserScroll.html#observeDirectionY">observeDirectionY</a></li><li data-type='method'><a href="BrowserScroll.html#observeEndY">observeEndY</a></li><li data-type='method'><a href="BrowserScroll.html#observeHalfEndY">observeHalfEndY</a></li><li data-type='method'><a href="BrowserScroll.html#observeScroll">observeScroll</a></li><li data-type='method'><a href="BrowserScroll.html#onScroll">onScroll</a></li><li data-type='method'><a href="BrowserScroll.html#setDirectionLooseGapY">setDirectionLooseGapY</a></li><li data-type='method'><a href="BrowserScroll.html#setScroll">setScroll</a></li><li data-type='method'><a href="BrowserScroll.html#setScrollTo">setScrollTo</a></li></ul></li><li><a href="CacheValue.html">CacheValue</a><ul class='methods'><li data-type='method'><a href="CacheValue.html#destroy">destroy</a></li><li data-type='method'><a href="CacheValue.html#setExpireAt">setExpireAt</a></li><li data-type='method'><a href="CacheValue.html#setExpireNotify">setExpireNotify</a></li><li data-type='method'><a href="CacheValue.html#setKey">setKey</a></li><li data-type='method'><a href="CacheValue.html#setValue">setValue</a></li></ul></li><li><a href="TTLCache.html">TTLCache</a><ul class='methods'><li data-type='method'><a href="TTLCache.html#destroy">destroy</a></li><li data-type='method'><a href="TTLCache.html#expired">expired</a></li><li data-type='method'><a href="TTLCache.html#expireNotify">expireNotify</a></li><li data-type='method'><a href="TTLCache.html#flushAll">flushAll</a></li><li data-type='method'><a href="TTLCache.html#flushExpired">flushExpired</a></li><li data-type='method'><a href="TTLCache.html#get">get</a></li><li data-type='method'><a href="TTLCache.html#getCache">getCache</a></li><li data-type='method'><a href="TTLCache.html#getKeys">getKeys</a></li><li data-type='method'><a href="TTLCache.html#has">has</a></li><li data-type='method'><a href="TTLCache.html#remove">remove</a></li><li data-type='method'><a href="TTLCache.html#set">set</a></li><li data-type='method'><a href="TTLCache.html#toJson">toJson</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-array.html">array</a><ul class='methods'><li data-type='method'><a href="module-array.html#.availableOr">availableOr</a></li><li data-type='method'><a href="module-array.html#.distinct">distinct</a></li><li data-type='method'><a href="module-array.html#.extract">extract</a></li><li data-type='method'><a href="module-array.html#.insert">insert</a></li><li data-type='method'><a href="module-array.html#.shuffle">shuffle</a></li><li data-type='method'><a href="module-array.html#.tail">tail</a></li><li data-type='method'><a href="module-array.html#.transposeRow">transposeRow</a></li><li data-type='method'><a href="module-array.html#.transposeRowFilter">transposeRowFilter</a></li><li data-type='method'><a href="module-array.html#.uniqueFilter">uniqueFilter</a></li></ul></li><li><a href="module-color.html">color</a><ul class='methods'><li data-type='method'><a href="module-color.html#.hexToRgb">hexToRgb</a></li><li data-type='method'><a href="module-color.html#.inHexRange">inHexRange</a></li><li data-type='method'><a href="module-color.html#.inRgbRange">inRgbRange</a></li><li data-type='method'><a href="module-color.html#.rgbToHex">rgbToHex</a></li></ul></li><li><a href="module-date.html">date</a><ul class='methods'><li data-type='method'><a href="module-date.html#.toFormat">toFormat</a></li><li data-type='method'><a href="module-date.html#.toPast">toPast</a></li></ul></li><li><a href="module-number.html">number</a><ul class='methods'><li data-type='method'><a href="module-number.html#.getRandomizer">getRandomizer</a></li><li data-type='method'><a href="module-number.html#.isNumber">isNumber</a></li><li data-type='method'><a href="module-number.html#.randomRangeFloat">randomRangeFloat</a></li><li data-type='method'><a href="module-number.html#.randomRangeInt">randomRangeInt</a></li></ul></li><li><a href="module-point.html">point</a><ul class='methods'><li data-type='method'><a href="module-point.html#.intersect">intersect</a></li><li data-type='method'><a href="module-point.html#.isCollision">isCollision</a></li><li data-type='method'><a href="module-point.html#.isIntersect">isIntersect</a></li></ul></li><li><a href="module-string.html">string</a><ul class='methods'><li data-type='method'><a href="module-string.html#.collapseMultiline">collapseMultiline</a></li><li data-type='method'><a href="module-string.html#.escape">escape</a></li><li data-type='method'><a href="module-string.html#.insert">insert</a></li><li data-type='method'><a href="module-string.html#.leadingTime">leadingTime</a></li><li data-type='method'><a href="module-string.html#.padEnd">padEnd</a></li><li data-type='method'><a href="module-string.html#.padStart">padStart</a></li><li data-type='method'><a href="module-string.html#.refineSafeHtmlText">refineSafeHtmlText</a></li><li data-type='method'><a href="module-string.html#.refineWhitespace">refineWhitespace</a></li><li data-type='method'><a href="module-string.html#.removeTag">removeTag</a></li><li data-type='method'><a href="module-string.html#.replaceAll">replaceAll</a></li><li data-type='method'><a href="module-string.html#.toCamelFromKebab">toCamelFromKebab</a></li><li data-type='method'><a href="module-string.html#.toCamelFromSnake">toCamelFromSnake</a></li><li data-type='method'><a href="module-string.html#.toCurrencyFormat">toCurrencyFormat</a></li><li data-type='method'><a href="module-string.html#.toEllipsisEnd">toEllipsisEnd</a></li><li data-type='method'><a href="module-string.html#.toEllipsisMiddle">toEllipsisMiddle</a></li><li data-type='method'><a href="module-string.html#.toMaskingFirst">toMaskingFirst</a></li><li data-type='method'><a href="module-string.html#.toMaskingJustify">toMaskingJustify</a></li><li data-type='method'><a href="module-string.html#.toMaskingLast">toMaskingLast</a></li><li data-type='method'><a href="module-string.html#.toMaskingMiddle">toMaskingMiddle</a></li><li data-type='method'><a href="module-string.html#.toUpperCaseHead">toUpperCaseHead</a></li><li data-type='method'><a href="module-string.html#.toWordArray">toWordArray</a></li><li data-type='method'><a href="module-string.html#.trimEnd">trimEnd</a></li><li data-type='method'><a href="module-string.html#.trimStart">trimStart</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="JdArray.html">JdArray</a></li><li><a href="JdDate.html">JdDate</a></li><li><a href="JdNumber.html">JdNumber</a></li><li><a href="JdPoint.html">JdPoint</a></li><li><a href="JdString.html">JdString</a></li></ul><h3>Interfaces</h3><ul><li><a href="CurrencyPriceOption.html">CurrencyPriceOption</a></li><li><a href="DateFormatOption.html">DateFormatOption</a></li><li><a href="DatePastOption.html">DatePastOption</a></li><li><a href="MaskingOptions.html">MaskingOptions</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">array/utils.ts</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @packageDocumentation
 * @module array
 */
import { getRandomizer } from '../number/utils';

/**
 * 지정된 avaliable 에 value 가 포함되는 경우 value 를, 그렇지 않은 경우 or 값을 반환
 * @template T
 * @param [available=[]] 유효한 값들
 * @param value 검사할 값
 * @param [or=null] 검사할 값이 유효한 값에 포함되지 않을 경우 대체 값
 * @example
 * console.log(availableOr(available1, 10, 10)); // 10
 * console.log(availableOr(available1, 20, 10)); // 20
 * console.log(availableOr(available1, 30, 10)); // 30
 * console.log(availableOr(available1, 30, null)); // 30
 * console.log(availableOr(available1, 111, 10)); // 10
 * console.log(availableOr(available1, 222, 10)); // 10
 * console.log(availableOr(available1, 333, 10)); // 10
 * console.log(availableOr(available1, 444, null)); // null
 */
export function availableOr&lt;T>(available: ArrayLike&lt;T> = [], value: any, or = null): T {
  if (!available.length) return or;
  const find = (available as any[]).find((compare: any) => {
    return compare === value;
  });
  return find || or;
}

/**
 * 지정된 ref 배열의 index 에 value 를 삽입합니다.
 * (원본 ref 가 직접 변경 됩니다.)
 * @param ref 소스 배열
 * @param [index=0] 삽입될 인덱스
 * @param value 삽입될 값
 * @example
 * console.log(insert([1, 2, 3], 1, 99)); // [1, 99, 2, 3]
 * console.log(insert([1, 2, 3], 1, ["A", "B"])); // [1, "A", "B", 2, 3];
 * console.log(insert([1, 2, 3], 10, 99)); // [1, 2, 3, 99]);
 * console.log(insert([1, 2, 3], 10, ["A", "B"])); // [1, 2, 3, "A", "B"];
 * console.log(insert([1, 2, 3], null, "A")); // ["A", 1, 2, 3];
 */
export function insert(ref: any[], index: number = 0, value: any): any[] {
  if (isNaN(index) || index &lt; 0 || ref.length &lt;= index) {
    if (value instanceof Array) {
      ref.push(...value);
    } else {
      ref.push(value);
    }
  } else {
    if (value instanceof Array) {
      ref.splice(index, 0, ...value);
    } else {
      ref.splice(index, 0, value);
    }
  }
  return ref;
}

/**
 * 지정된 ref 배열의 index ~ deleteCount 만큼 제거합니다.
 * (원본 ref 가 직접 변경 됩니다.)
 * @template T
 * @param ref 소스 배열
 * @param [index=0] 삭제 시작 index
 * @param [deleteCount=1] 삭제 갯수
 * @example
 * console.log(extract([1, 2, 3, 4])); // [2, 3, 4];
 * console.log(extract([1, 2, 3, 4], 1, 1)); // [1, 3, 4];
 * console.log(extract([1, 2, 3, 4], 2, 1)); // [1, 2, 4];
 * console.log(extract([1, 2, 3, 4], 3, 1)); // [1, 2, 3];
 * console.log(extract([1, 2, 3, 4], 0, 2)); // [3, 4];
 * console.log(extract([1, 2, 3, 4], 0, 10)); // [];
 * console.log(extract([1, 2, 3, 4], 2, 10)); // [1, 2];
 */
export function extract&lt;T>(ref: ArrayLike&lt;T>, index: number = 0, deleteCount: number = 1): ArrayLike&lt;T> {
  if (isNaN(index) || index &lt; 0 || ref.length &lt;= index) {
    return ref;
  }
  (ref as any[]).splice(index, deleteCount);
  return ref;
}

/**
 * 지정된 마지막 배열을 아이템을 반환 합니다.
 * @template T
 * @param array 소스 배열
 * @param [shiftIndex=0] 아이템을 꺼낼 index. (뒤에서 앞으로)
 * @param [overflowSafe=true] 계산된 index 가 0 보다 작은 경우는 맨 앞, length 보다 큰 경우는 마지막 아이템 index 로 찾을지 여부
 * @example
 * console.log(tail([1, 2, 3, 4])); // 4
 * console.log(tail([1, 2, 3, 4],1)); // 3
 * console.log(tail([1, 2, 3, 4],2)); // 2
 * console.log(tail([1, 2, 3, 4],3)); // 1
 * console.log(tail([1, 2, 3, 4],4)); // 1
 * console.log(tail([1, 2, 3, 4],-1)); // 4
 */
export function tail&lt;T>(array: ArrayLike&lt;T>, shiftIndex: number = 0, overflowSafe: boolean = true): T {
  const lastIndex = array.length - 1;
  let index = lastIndex - shiftIndex;
  if (overflowSafe) {
    if (index &lt; 0) {
      index = 0;
    } else if (lastIndex &lt; index) {
      index = lastIndex;
    }
  }
  return array[index];
}

/**
 * 중복된 값을 제외시킨 배열을 반환 합니다.
 * @template T
 * @param array 소스 배열
 * @param [uniqueFn] 직접 filter 할 key 값을 반환할 수 있는 함수
 * @example
 *
 * const arr1 = [1, 2, 3, 4, 5];
 * const arr2 = [1, 2, 1, 3, 4, 4, 3, 5, 1];
 * const arr3 = [
 *   { id: 1, name: "google" },
 *   { id: 2, name: "microsoft" },
 *   { id: 1, name: "google" },
 *   { id: 3, name: "amazone" }
 * ];
 * console.log(distinct(arr1)); // [1, 2, 3, 4, 5]
 * console.log(distinct(arr2)); // [1, 2, 3, 4, 5]
 * console.log(distinct(arr3, item => {
 *   return item.id;
 * })); // [{ id: 1, name: "google" }, { id: 2, name: "microsoft" }, { id: 3, name: "amazone" }]
 */
export function distinct&lt;T>(array: ReadonlyArray&lt;T>, uniqueFn?: (item: T) => string | any): T[] {
  if (!uniqueFn) {
    return array.filter((item, index) => {
      return array.indexOf(item) === index;
    });
  }
  return array.filter(uniqueFilter(uniqueFn));
}

/**
 * unique 필터를 만들 때 흔히 반복되는 구문을 구현해 놓은 함수
 * @template T
 * @param uniqueFn filter 할 key 값을 반환할 수 있는 함수
 * @example
 * const arr1 = [
 *   { id: 1, name: "google" },
 *   { id: 2, name: "microsoft" },
 *   { id: 1, name: "google" },
 *   { id: 3, name: "amazone" }
 * ];
 * const idFilter = item => {
 *   return item.id;
 * };
 * const nameFilter = item => {
 *   return item.name;
 * };
 * console.log(arr1.filter(uniqueFilter(idFilter))); // [{ id: 1, name: "google" },{ id: 2, name: "microsoft" },{ id: 3, name: "amazone" } ]
 * console.log(arr1.filter(uniqueFilter(nameFilter))); // [{ id: 1, name: "google" },{ id: 2, name: "microsoft" },{ id: 3, name: "amazone" } ]
 */
export function uniqueFilter&lt;T>(uniqueFn: (item: T) => string | any): (item: T) => boolean {
  const hash: { [key: string]: boolean } = {};
  return (item) => {
    const key = uniqueFn(item);
    if (hash[key]) return false;
    hash[key] = true;
    return true;
  };
}

/**
 * 배열을 섞습니다.
 * @template T
 * @param ref 소스 배열
 * @param [seed] [getRandomizer]{@link getRandomizer}
 * @example
 * const arr = [1,2,3,4];
 * shuffle(arr);
 * console.log(arr); // [?,?,?,?]
 */
export function shuffle&lt;T>(ref: T[], seed?: number): void {
  const random = getRandomizer(seed);
  for (let i = ref.length - 1; i > 0; i -= 1) {
    const j = Math.floor(random() * (i + 1));
    const temp = ref[i];
    ref[i] = ref[j];
    ref[j] = temp;
  }
}

/**
 * 1차원 행[]을 2차원 행열[][]로 바꿉니다. 원본 컬럼을 그대로 사용합니다.
 * @template T 각 행의 타입
 * @param {T[]} ref 변경 할 배열
 * @returns {T[][]}
 * @example
 * const arr = [{id:1,name:'A'},{id:2,name:'B'},{id:3,name:'C'}];
 * const rows = transposeRow(arr);
 * console.log(rows); // [[{"id":1,"name":"A"},{"id":2,"name":"B"},{"id":3,"name":"C"}],[{"id":1,"name":"A"},{"id":2,"name":"B"},{"id":3,"name":"C"}],[{"id":1,"name":"A"},{"id":2,"name":"B"},{"id":3,"name":"C"}]]
 */
export function transposeRow&lt;T>(ref: T[]): T[][] {
  const refLen = ref.length;
  const newRow: T[][] = Array(refLen);
  for (let r = 0; r &lt; refLen; r++) {
    const newColumn: T[] = Array(refLen);
    for (let c = 0; c &lt; refLen; c++) {
      newColumn[c] = ref[c];
    }
    newRow[r] = newColumn;
  }
  return newRow;
}

interface TransposeRowFilterParams&lt;T> {
  rowIndex: number;
  columnIndex: number;
  item: T;
}

/**
 * 1차원 행[]을 2차원 행열[][]로 바꿉니다. 필터를 거친 요소로 변경합니다.
 * @template T 각 행의 타입
 * @template C 필터한 열의 타입
 * @param {T[]} ref 변경 할 배열
 * @param {Function} filter (params: TransposeRowFilterParams&lt;T>) => C 각 요소를 정제할 함수.
 * @returns {C[][]}
 * @example
 * const arr = [{id:1,name:'A'},{id:2,name:'B'},{id:3,name:'C'}];
 * const rows = transposeRowFilter(arr, (params) => {
 *   const { rowIndex, columnIndex, item } = params;
 *   return {
 *     ...item,
 *     myValue1: item.name.toLowerCase(),
 *     rowIndex,
 *     columnIndex,
 *   };
 * });
 * console.log(rows); // [[{"id":1,"name":"A","myValue1":"a","rowIndex":0,"columnIndex":0},{"id":2,"name":"B","myValue1":"b","rowIndex":0,"columnIndex":1},{"id":3,"name":"C","myValue1":"c","rowIndex":0,"columnIndex":2}],[{"id":1,"name":"A","myValue1":"a","rowIndex":1,"columnIndex":0},{"id":2,"name":"B","myValue1":"b","rowIndex":1,"columnIndex":1},{"id":3,"name":"C","myValue1":"c","rowIndex":1,"columnIndex":2}],[{"id":1,"name":"A","myValue1":"a","rowIndex":2,"columnIndex":0},{"id":2,"name":"B","myValue1":"b","rowIndex":2,"columnIndex":1},{"id":3,"name":"C","myValue1":"c","rowIndex":2,"columnIndex":2}]];
 */
export function transposeRowFilter&lt;T, C>(ref: T[], filter: (params: TransposeRowFilterParams&lt;T>) => C): C[][] {
  const refLen = ref.length;
  const newRow: C[][] = Array(refLen);
  for (let r = 0; r &lt; refLen; r++) {
    const newColumn: C[] = Array(refLen);
    for (let c = 0; c &lt; refLen; c++) {
      newColumn[c] = filter({
        rowIndex: r,
        columnIndex: c,
        item: ref[c],
      });
    }
    newRow[r] = newColumn;
  }
  return newRow;
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated at Fri Sep 04 2020 10:23:37 GMT+0000 (Coordinated Universal Time)
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
